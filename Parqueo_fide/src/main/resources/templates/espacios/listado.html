<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head th:replace="~{layout/plantilla :: head}">
  <title>Espacios</title>
</head>
<body class="d-flex flex-column min-vh-100">
<header th:replace="~{layout/plantilla :: header}"></header>

<main class="container" style="padding-top: 90px;">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="m-0">Espacios</h3>
    <a th:href="@{/espacios/nuevo}" class="btn btn-primary">
      <i class="fas fa-plus"></i> Nuevo espacio
    </a>
  </div>

  <!-- Filtro simple por zona -->
  <form class="row g-2 mb-3" th:action="@{/espacios/listado}" method="get">
    <div class="col-auto">
      <input name="filtroZona" class="form-control" placeholder="Filtrar por zona"
             th:value="${filtroZona}">
    </div>
    <div class="col-auto">
      <button class="btn btn-outline-secondary" type="submit">Filtrar</button>
    </div>
  </form>

  <div class="table-responsive">
    <table class="table table-hover align-middle">
      <thead class="table-light">
      <tr>
        <th>ID</th>
        <th>Código</th>
        <th>Zona</th>
        <th>Disponible</th>
        <th>Descripción</th>
        <th class="text-end">Acciones</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="e : ${espacios}">
        <td th:text="${e.id}">1</td>
        <td th:text="${e.codigo}">A-01</td>
        <td th:text="${e.zona}">Norte</td>
        <td>
          <span th:text="${e.disponible} ? 'Sí' : 'No'"></span>
        </td>
        <td th:text="${e.descripcion}">Cerca de la entrada</td>
        <td class="text-end">
          <a th:href="@{|/espacios/editar/${e.id}|}" class="btn btn-sm btn-outline-secondary">
            <i class="fas fa-edit"></i> Editar
          </a>
          <form th:action="@{|/espacios/eliminar/${e.id}|}" method="post" class="d-inline">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button class="btn btn-sm btn-outline-danger" type="submit"
                    onclick="return confirm('¿Eliminar este espacio?')">
              <i class="fas fa-trash"></i> Eliminar
            </button>
          </form>
        </td>
      </tr>
      <tr th:if="${#lists.isEmpty(espacios)}">
        <td colspan="6" class="text-center text-muted">No hay espacios aún.</td>
      </tr>
      </tbody>
    </table>
  </div>
</main>

<footer th:replace="~{layout/plantilla :: footer}"></footer>
</body>
</html>